{
  "name": "integration-workbench",
  "displayName": "Integration Workbench",
  "description": "A workbench tool to work with API integrations.",
  "version": "0.9.0",
  "engines": {
    "vscode": "^1.82.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [],
  "main": "./build/app/extension.js",
  "contributes": {
    "configuration": {
      "title": "Integration Workbenches",
      "properties": {
        "integrationWorkbench.allowRequestsInWorkbench": {
          "type": "boolean",
          "default": false,
          "description": "Allow requests to be created in the root level of a workbench, outside of any collections."
        },
        "integrationWorkbench.retainResponsesAmount": {
          "type": "number",
          "default": 50,
          "description": "How many responses to retain in the responses panel, excluding saved responses."
        },
        "integrationWorkbench.retainResponsesDuration": {
          "type": [
            "number",
            "null"
          ],
          "default": null,
          "description": "How long a response should be kept in the editor before clearing it out on the next refresh."
        },
        "integrationWorkbench.showRunRequestButton": {
          "type": "boolean",
          "default": true,
          "description": "If a run button should be shown inline with each request within a workbench."
        }
      }
    },
    "commands": [
      {
        "command": "integrationWorkbench.openWalkthrough",
        "title": "Open Walkthrough"
      },
      {
        "command": "integrationWorkbench.createWorkbench",
        "title": "Create a Workbench",
        "icon": "$(plus)"
      },
      {
        "command": "integrationWorkbench.editWorkbenchName",
        "title": "Edit workbench name",
        "shortTitle": "Edit name",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.editWorkbenchDescription",
        "title": "Edit workbench description",
        "shortTitle": "Edit description",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.deleteWorkbench",
        "title": "Delete workbench",
        "shortTitle": "Delete",
        "icon": "$(trashcan)"
      },
      {
        "command": "integrationWorkbench.createCollection",
        "title": "Create a Collection",
        "icon": "$(new-folder)"
      },
      {
        "command": "integrationWorkbench.editCollectionName",
        "title": "Edit collection name",
        "shortTitle": "Edit name",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.editCollectionDescription",
        "title": "Edit collection description",
        "shortTitle": "Edit description",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.runWorkbench",
        "title": "Run all",
        "icon": "$(run)"
      },
      {
        "command": "integrationWorkbench.runCollection",
        "title": "Run all",
        "icon": "$(run)"
      },
      {
        "command": "integrationWorkbench.deleteCollection",
        "title": "Delete collection",
        "shortTitle": "Delete",
        "icon": "$(trashcan)"
      },
      {
        "command": "integrationWorkbench.createRequest",
        "title": "Create a Request",
        "icon": "$(new-file)"
      },
      {
        "command": "integrationWorkbench.editRequestName",
        "title": "Edit request name",
        "shortTitle": "Edit name",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.deleteRequest",
        "title": "Delete request",
        "shortTitle": "Delete",
        "icon": "$(trashcan)"
      },
      {
        "command": "integrationWorkbench.runRequest",
        "title": "Run",
        "icon": "$(run)"
      },
      {
        "command": "integrationWorkbench.deleteResponse",
        "title": "Delete Response",
        "icon": "$(trashcan)"
      },
      {
        "command": "integrationWorkbench.cancelResponse",
        "title": "Cancel Request",
        "icon": "$(chrome-close)"
      },
      {
        "command": "integrationWorkbench.editRequest",
        "title": "Edit Request",
        "icon": "$(gear)"
      },
      {
        "command": "integrationWorkbench.refreshWorkbenches",
        "title": "Refresh the integration workbench"
      },
      {
        "command": "integrationWorkbench.dev.createWorkbenches",
        "title": "(Dev) Create workbenches"
      },
      {
        "command": "integrationWorkbench.dev.removeWorkbenches",
        "title": "(Dev) Remove workbenches"
      },
      {
        "command": "integrationWorkbench.createScript",
        "title": "Create a Script",
        "icon": "$(new-file)"
      },
      {
        "command": "integrationWorkbench.editScriptName",
        "title": "Edit script name",
        "shortTitle": "Edit name",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.deleteScriptDeclarations",
        "title": "Delete all script declarations",
        "icon": "$(trashcan)"
      },
      {
        "command": "integrationWorkbench.deleteScript",
        "title": "Delete script",
        "shortTitle": "Delete",
        "icon": "$(trashcan)"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "workbench",
          "title": "Integration Workbench",
          "icon": "media/workbench.svg"
        }
      ],
      "panel": [
        {
          "id": "results",
          "title": "Responses",
          "icon": "media/workbench.svg"
        }
      ]
    },
    "views": {
      "workbench": [
        {
          "id": "workbenches",
          "name": "Workbenches"
        },

        {
          "id": "scripts",
          "name": "Scripts"
        }
      ],
      "results": [
        {
          "id": "requests",
          "name": "Requests",
          "icon": "media/workbench.svg",
          "contextualTitle": "Requests",
          "initialSize": 0
        },
        {
          "id": "response",
          "name": "Response",
          "icon": "media/workbench.svg",
          "contextualTitle": "Response",
          "type": "webview",
          "initialSize": 1
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "workbenches",
        "contents": "No workbenches yet! Create your first one to get started.\n[Create a Workbench](command:integrationWorkbench.createWorkbench)\n[Open the walkthrough](command:integrationWorkbench.openWalkthrough) to learn how Integration Workbench works."
      },
      {
        "view": "scripts",
        "contents": "No scripts yet! Create your first one to get started.\n[Create a Script](command:integrationWorkbench.createScript)\n[Open the walkthrough](command:integrationWorkbench.openScriptsWalkthrough) to learn how scripts works."
      },
      {
        "view": "requests",
        "contents": "No requests has been made in this session yet!"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "integrationWorkbench.createWorkbench",
          "when": "view == workbenches",
          "group": "navigation"
        },
        {
          "command": "integrationWorkbench.createScript",
          "when": "view == scripts",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "integrationWorkbench.runWorkbench",
          "when": "view == workbenches && (viewItem == workbench)",
          "group": "workbench@1"
        },
        {
          "command": "integrationWorkbench.editWorkbenchName",
          "when": "view == workbenches && (viewItem == workbench)",
          "group": "workbench@2"
        },
        {
          "command": "integrationWorkbench.editWorkbenchDescription",
          "when": "view == workbenches && (viewItem == workbench)",
          "group": "workbench@3"
        },
        {
          "command": "integrationWorkbench.deleteWorkbench",
          "when": "view == workbenches && (viewItem == workbench)",
          "group": "workbench@4"
        },

        {
          "command": "integrationWorkbench.createCollection",
          "when": "view == workbenches && viewItem == workbench",
          "group": "inline"
        },
        {
          "command": "integrationWorkbench.runCollection",
          "when": "view == workbenches && (viewItem == collection)",
          "group": "collection@1"
        },
        {
          "command": "integrationWorkbench.editCollectionName",
          "when": "view == workbenches && (viewItem == collection)",
          "group": "collection@2"
        },
        {
          "command": "integrationWorkbench.editCollectionDescription",
          "when": "view == workbenches && (viewItem == collection)",
          "group": "collection@3"
        },
        {
          "command": "integrationWorkbench.deleteCollection",
          "when": "view == workbenches && (viewItem == collection)",
          "group": "collection@4"
        },
        
        {
          "command": "integrationWorkbench.createRequest",
          "when": "view == workbenches && ((config.integrationWorkbench.allowRequestsInWorkbench && viewItem == workbench) || viewItem == collection)",
          "group": "inline"
        },

        {
          "command": "integrationWorkbench.runRequest",
          "when": "view == workbenches && (viewItem == request) && config.integrationWorkbench.showRunRequestButton",
          "group": "inline"
        },
        {
          "command": "integrationWorkbench.runRequest",
          "when": "view == workbenches && (viewItem == request) && !config.integrationWorkbench.showRunRequestButton",
          "group": "request@1"
        },
        {
          "command": "integrationWorkbench.editRequestName",
          "when": "view == workbenches && (viewItem == request)",
          "group": "request@2"
        },
        {
          "command": "integrationWorkbench.deleteRequest",
          "when": "view == workbenches && (viewItem == request)",
          "group": "request@3"
        },
        {
          "command": "integrationWorkbench.cancelResponse",
          "when": "view == requests && viewItem == response-started",
          "group": "inline"
        },
        {
          "command": "integrationWorkbench.deleteResponse",
          "when": "view == requests && (viewItem == response-done || viewItem == response-failed)",
          "group": "inline"
        },

        {
          "command": "integrationWorkbench.editScriptName",
          "when": "view == scripts && (viewItem == script)",
          "group": "script@1"
        },

        {
          "command": "integrationWorkbench.deleteScript",
          "when": "view == scripts && (viewItem == script)",
          "group": "script@2"
        }
      ],
      "editor/title": [
        {
          "command": "integrationWorkbench.editRequest",
          "when": "activeWebviewPanelId == integrationWorkbench.request",
          "group": "navigation"
        }
      ]
    },
    "walkthroughs": [
      {
        "id": "workbenches",
        "title": "Get started with workbenches",
        "description": "Discover how to work with workbenches.",
        "steps": [
          {
            "id": "openWorkbenches",
            "title": "Open your workbenches",
            "description": "A workbench is where you construct your collections of requests and configure shared configurations such as authentications.\n[Focus on Workbenches](command:workbenches.focus)",
            "media": {
              "image": "resources/walkthrough/test.svg",
              "altText": "Empty image"
            },
            "completionEvents": [
              "onView:workbenches"
            ]
          },
          {
            "id": "createWorkbench",
            "title": "Create a workbench",
            "description": "Create your first workbench for your repository or project.\n[Create a Workbench](command:integrationWorkbench.createWorkbench)",
            "media": {
              "image": "resources/walkthrough/test.svg",
              "altText": "Empty image"
            },
            "completionEvents": [
              "onCommand:integrationWorkbench.createWorkbench"
            ]
          },
          {
            "id": "createCollection",
            "title": "Create a collection",
            "description": "Create your first collection of requests to divide your workbench into several parts.\n[Create a Collection](command:integrationWorkbench.createCollection)",
            "media": {
              "image": "resources/walkthrough/test.svg",
              "altText": "Empty image"
            },
            "completionEvents": [
              "onCommand:integrationWorkbench.createCollection"
            ]
          }
        ]
      }
    ]
  },
  "scripts": {
    "start": "react-scripts start",
    "vscode:prepublish": "node ./scripts/build-non-split.js && tsc -p tsconfig.extension.json && tsc-alias -p tsconfig.extension.json",
    "build": "node ./scripts/build-non-split.js && tsc -p tsconfig.extension.json && tsc-alias -p tsconfig.extension.json"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.3",
    "@types/node": "18.x",
    "@types/react": "^18.2.36",
    "@types/react-dom": "^18.2.14",
    "@types/vscode": "^1.84.0",
    "@types/vscode-webview": "^1.57.3",
    "@typescript-eslint/eslint-plugin": "^6.9.0",
    "@typescript-eslint/parser": "^6.9.0",
    "@vscode/codicons": "^0.0.35",
    "@vscode/test-electron": "^2.3.6",
    "@vscode/webview-ui-toolkit": "^1.2.2",
    "esbuild": "0.16.17",
    "eslint": "^8.52.0",
    "glob": "^10.3.10",
    "mocha": "^10.2.0",
    "monaco-editor": "^0.44.0",
    "monaco-editor-webpack-plugin": "^7.1.0",
    "react-scripts": "^5.0.1",
    "rewire": "^7.0.0",
    "shiki": "^0.14.5",
    "tsc-alias": "^1.8.8",
    "typescript": "^5.2.2"
  },
  "dependencies": {
    "@monaco-editor/react": "^4.6.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}

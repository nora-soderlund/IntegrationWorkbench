{
  "name": "integration-workbench",
  "displayName": "Integration Workbench",
  "description": "A workbench tool to work with API integrations.",
  "version": "0.9.0",
  "engines": {
    "vscode": "^1.82.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [],
  "main": "./build/extension.js",
  "contributes": {
    "configuration": {
      "title": "Integration Workbenches",
      "properties": {
        "integrationWorkbench.allowRequestsInWorkbench": {
          "type": "boolean",
          "default": false,
          "description": "Allow requests to be created in the root level of a workbench, outside of any collections."
        },
        "integrationWorkbench.defaultWorkbenchStorage": {
          "type": "string",
          "enum": [
            "prompt",
            "repository",
            "user"
          ],
          "enumItemLabels": [
            "Prompt every time",
            "Repository",
            "User storage"
          ],
          "enumDescriptions": [
            "Prompts a selection each time a new workbench is created.",
            "Defaults to workbench files being stored in the repository, useful for sharing workbenches across a team.",
            "Defaults to workbench files being stored in the VS Code user storage, useful for syncing workbenches across several devices."
          ],
          "default": "prompt",
          "description": "Where new workbenches should be saved to."
        },
        "integrationWorkbench.retainResponsesAmount": {
          "type": "number",
          "default": 50,
          "description": "How many responses to retain in the responses panel, excluding saved responses."
        },
        "integrationWorkbench.showRunRequestButton": {
          "type": "boolean",
          "default": true,
          "description": "If a run button should be shown inline with each request within a workbench."
        }
      }
    },
    "commands": [
      {
        "command": "integrationWorkbench.openWalkthrough",
        "title": "Open Walkthrough"
      },
      {
        "command": "integrationWorkbench.createWorkbench",
        "title": "Create a Workbench",
        "icon": "$(plus)"
      },
      {
        "command": "integrationWorkbench.createCollection",
        "title": "Create a Collection",
        "icon": "$(new-folder)"
      },
      {
        "command": "integrationWorkbench.editCollectionName",
        "title": "Edit",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.editCollectionDescription",
        "title": "Edit description",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.runCollection",
        "title": "Run all",
        "icon": "$(run)"
      },
      {
        "command": "integrationWorkbench.createRequest",
        "title": "Create a Request",
        "icon": "$(new-file)"
      },
      {
        "command": "integrationWorkbench.editRequestName",
        "title": "Edit",
        "icon": "$(pencil)"
      },
      {
        "command": "integrationWorkbench.runRequest",
        "title": "Run",
        "icon": "$(run)"
      },
      {
        "command": "integrationWorkbench.deleteResponse",
        "title": "Delete Response",
        "icon": "$(trashcan)"
      },
      {
        "command": "integrationWorkbench.cancelResponse",
        "title": "Cancel Request",
        "icon": "$(chrome-close)"
      },
      {
        "command": "integrationWorkbench.editRequest",
        "title": "Edit Request",
        "icon": "$(gear)"
      },
      {
        "command": "integrationWorkbench.refreshWorkbenches",
        "title": "Refresh the integration workbench"
      },
      {
        "command": "integrationWorkbench.dev.createWorkbenches",
        "title": "(Dev) Create workbenches"
      },
      {
        "command": "integrationWorkbench.dev.removeWorkbenches",
        "title": "(Dev) Remove workbenches"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "workbench",
          "title": "Integration Workbench",
          "icon": "media/workbench.svg"
        }
      ],
      "panel": [
        {
          "id": "results",
          "title": "Responses",
          "icon": "media/workbench.svg"
        }
      ]
    },
    "views": {
      "workbench": [
        {
          "id": "workbenches",
          "name": "Workbenches"
        }
      ],
      "results": [
        {
          "id": "requests",
          "name": "Requests",
          "icon": "media/workbench.svg",
          "contextualTitle": "Requests",
          "initialSize": 0
        },
        {
          "id": "response",
          "name": "Response",
          "icon": "media/workbench.svg",
          "contextualTitle": "Response",
          "type": "webview",
          "initialSize": 1
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "workbenches",
        "contents": "No workbenches yet! Create your first one to get started.\n[Create a Workbench](command:integrationWorkbench.createWorkbench)\n[Open the walkthrough](command:integrationWorkbench.openWalkthrough) to learn how Integration Workbench works."
      },
      {
        "view": "requests",
        "contents": "No requests has been made in this session yet!"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "integrationWorkbench.createWorkbench",
          "when": "view == workbenches",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "integrationWorkbench.createCollection",
          "when": "view == workbenches && viewItem == workbench",
          "group": "inline"
        },
        {
          "command": "integrationWorkbench.runCollection",
          "when": "view == workbenches && (viewItem == collection)"
        },
        {
          "command": "integrationWorkbench.editCollectionName",
          "when": "view == workbenches && (viewItem == collection)"
        },
        {
          "command": "integrationWorkbench.editCollectionDescription",
          "when": "view == workbenches && (viewItem == collection)"
        },
        {
          "command": "integrationWorkbench.createRequest",
          "when": "view == workbenches && ((config.integrationWorkbench.allowRequestsInWorkbench && viewItem == workbench) || viewItem == collection)",
          "group": "inline"
        },
        {
          "command": "integrationWorkbench.editRequestName",
          "when": "view == workbenches && (viewItem == request)"
        },
        {
          "command": "integrationWorkbench.runRequest",
          "when": "view == workbenches && (viewItem == request) && config.integrationWorkbench.showRunRequestButton",
          "group": "inline"
        },
        {
          "command": "integrationWorkbench.runRequest",
          "when": "view == workbenches && (viewItem == request) && !config.integrationWorkbench.showRunRequestButton"
        },
        {
          "command": "integrationWorkbench.cancelResponse",
          "when": "view == requests && viewItem == response-started",
          "group": "inline"
        },
        {
          "command": "integrationWorkbench.deleteResponse",
          "when": "view == requests && (viewItem == response-done || viewItem == response-failed)",
          "group": "inline"
        }
      ],
      "editor/title": [
        {
          "command": "integrationWorkbench.editRequest",
          "when": "activeWebviewPanelId == integrationWorkbench.request",
          "group": "navigation"
        }
      ]
    },
    "walkthroughs": [
      {
        "id": "workbenches",
        "title": "Get started with workbenches",
        "description": "Discover how to work with workbenches.",
        "steps": [
          {
            "id": "openWorkbenches",
            "title": "Open your workbenches",
            "description": "A workbench is where you construct your collections of requests and configure shared configurations such as authentications.\n[Focus on Workbenches](command:workbenches.focus)",
            "media": {
              "image": "resources/walkthrough/test.svg",
              "altText": "Empty image"
            },
            "completionEvents": [
              "onView:workbenches"
            ]
          },
          {
            "id": "createWorkbench",
            "title": "Create a workbench",
            "description": "Create your first workbench for your repository or project.\n[Create a Workbench](command:integrationWorkbench.createWorkbench)",
            "media": {
              "image": "resources/walkthrough/test.svg",
              "altText": "Empty image"
            },
            "completionEvents": [
              "onCommand:integrationWorkbench.createWorkbench"
            ]
          },
          {
            "id": "createCollection",
            "title": "Create a collection",
            "description": "Create your first collection of requests to divide your workbench into several parts.\n[Create a Collection](command:integrationWorkbench.createCollection)",
            "media": {
              "image": "resources/walkthrough/test.svg",
              "altText": "Empty image"
            },
            "completionEvents": [
              "onCommand:integrationWorkbench.createCollection"
            ]
          }
        ]
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "yarn run package",
    "compile": "node ./esbuild.js",
    "watch": "node ./esbuild.js --watch",
    "pretest": "yarn run compile && yarn run lint",
    "lint": "eslint src --ext ts",
    "test": "node ./build/test/runTest.js",
    "package": "NODE_ENV=production node ./esbuild.js"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.3",
    "@types/node": "18.x",
    "@types/vscode": "^1.84.0",
    "@types/vscode-webview": "^1.57.3",
    "@typescript-eslint/eslint-plugin": "^6.9.0",
    "@typescript-eslint/parser": "^6.9.0",
    "@vscode/codicons": "^0.0.35",
    "@vscode/test-electron": "^2.3.6",
    "@vscode/webview-ui-toolkit": "^1.2.2",
    "esbuild": "0.16.17",
    "eslint": "^8.52.0",
    "glob": "^10.3.10",
    "mocha": "^10.2.0",
    "monaco-editor": "^0.44.0",
    "monaco-editor-webpack-plugin": "^7.1.0",
    "shiki": "^0.14.5",
    "typescript": "^5.2.2"
  }
}
